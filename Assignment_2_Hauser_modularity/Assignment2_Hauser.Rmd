---
title: "Assignment 2_Climate Change"
author: "Emma Hauser"
output: html_document
params:
  today: !r.Sys.Date
bibliography: HW2Refs.bib
---

<!--Chunk for file setup-->
```{r setup, include=FALSE}
#dependencies: none
#load packages:
install.packages(maps)
library(maps)
#general prep:
#new objects created: none
knitr::opts_chunk$set(echo = TRUE)
```

<!--Chunk for data import-->
```{r DataImport}
#Dependencies:external source
provided <- TRUE
if (provided)
{
  precip <- readRDS("USAAnnualPcpn1950_2008.rds")
  temp <- readRDS("USAAnnualTemp1950_2008.rds")
} else ( # Get from internet )
{
  #fill in
}

#New object(s) created: dataframe of each dataset imported, precip, temp
```

<!--Chunk for cleaning data-->
```{r DataCleanup}
#Dependencies: imported data, precip, temp
#Inputs/Args: number of years data required, dataset, data variable of interest
#function (MinYearsDat, dataset) {remove sites with less than 40 sample points, return(clean datamatrix)}
DataRaw <- temp
MinYearsDat <- 39
RawVar <- data
 CleanUp <- function(DataRaw, MinYearsDat, RawVar)
  {
   NaCount <- function(dat=DataRaw$RawVar)
    {
    return(sum(is.na(dat)))
    }
  AggregateGroups <- list(DataRaw$state, DataRaw$name, DataRaw$lat, DataRaw$lon)
  DatClean <- aggregate.data.frame(DataRaw, by = AggregateGroups, FUN = "NaCount")
  CleanDat <- DatClean[DatClean$data < MinYearsDat, "Group.2"]
  CDat <- DataRaw[DataRaw$name%in%CleanDat,]
  years <- as.vector(unique(CDat$year))
  yearnum <-length(years)
  sitenames <- unique(paste(CDat$state, CDat$name, CDat$lat, CDat$lon))
  ClimateData <- CDat$data
  ClimateData
  m <- matrix(ClimateData, ncol = yearnum, byrow = T)
  row.names(m) <- sitenames
  colnames(m) <- years
 }

CTemp <- CleanUp(temp, MinYearsDat = 39, RawVar = data)
CPrecip <- CleanUp(precip, MinYearsDat = 39, RawVar = data)
 
 #New objects created: data.frame of each dataset: cdataset
```
# Abstract

## Introduction
  Studies increasingly acknowledge that climates have been shifting over the past several decades and will continue to change in coming years in response to human environmental impacts (CITE). Although climate change was initially couched as "global warming", more recent observations suggest that we may experience both warming and cooling trends, characterized instead by more frequent temperature and precipitation extremes (CITE). These extreme events are already felt in warmer drier countries, particuarly in Africa and Asia where the infrastructure to handle repeated extreme climate events is not strong (@Patz2005). In the United States, however, more temperate climates and a socioeconomic standing that permits relatively quick responses to extreme weather events often makes the impacts of climate change go unacknowledged (@Patz2005). United States climate data is accumulating daily, though, such that a thorough analysis of temperature extremes is possible. This study aims to determine the extent to which temperature and precipitation patterns have changed in the United States over the past several decades, and whether observed changes represent overall warming trends or rather, an increase in climate extremes.

## Methods
  ####Data acquisition
  In this study, we obtained temperature and precipitation data from the Applied Climate Information System (ACIS) from 1950 to present. These data represent multpile sites in each of the 50 states, however we excluded sites for which less than 40 years of climate data had been collected. This gave us #### sites of temperature and #### sites of precipitation data. 
  ####Statistical Analyses

## Results

<!--Chunk for Climate Warming-->
<!--Code that shows temp change over time at each location that has 40 or more years of data-->
```{r Warming}
#Dependencies: cdataset matrix
#Inputs: climate dataset, with years and temps
#function (data=climate dataset)
#{
#subset by location. By location:
#corr(temp_data~year)
#plot(temp_data~year)

#return(statistic, plot)
#}

#New objects created: plots by location, corr statistic
```

<!--Chunk for Precip Change-->
<!--Code that shows precip over time at each location that has 40 or more years of data-->
```{r Precip}
#Dependencies: cdataset matrix
#Inputs: precipit dataset, with years and temps
#function (data=precip dataset)
#{
#subset by location. By location:
#corr(temp_data~year)
#plot(temp_data~year)

#return(statistic, plot)
#}

#New objects created: plots by location, corr statistic
```

<!--A chunk to map the data-->
```{r Maps}
#Dependencies: plots and corr stats, datasets
#input: dataset

#function to show plots by location
#return(map)

#New ojbects created: datamaps
```


## Conclusions


## References